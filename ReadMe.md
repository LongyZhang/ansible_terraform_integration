
---

## üîß Deployment & Configuration Plan

1. **Infrastructure Provisioning**  
   - Use Terraform to provision VPC, Subnet, Security Groups, and EC2 instances.
   - All EC2s reside in the same public subnet.
   - Two security groups:
     - One allows **SSH from your home IP**.
     - One allows **SSH from within the subnet** (VPC node communication).

2. **Ansible Setup on Manager Node**
   - Configure the **manager node** to control the other EC2 instances using Ansible.
   - Copy the AWS key-pair used during provisioning from your local machine to the manager node for SSH access.

---


## üõ†Ô∏è Practice Logs update

| Date       | Topic/Exercise                         | Notes/Outcome                                              |
|------------|-----------------------------------------|-----------------------------------------------------------|
| 2025-07-23 | Provisioning 6 workder node and one Manager node by terraform including the VPC, EC2----------------|
| 2025-07-24 | spend one hour to configure the manager EC2 node including ansible.cfg, hosts files ----------------|


## ‚öôÔ∏è Ansible Manager Node Configuration

After provisioning, SSH into the **manager EC2 node**, and perform the following steps:

### 1. Install Dependencies

```bash
sudo yum install -y python3
pip3 install --user ansible

---

## üìÅ Project Structure
```
terraform-ec2-redhat/
‚îú‚îÄ‚îÄ main.tf # Main Terraform configuration
‚îú‚îÄ‚îÄ outputs.tf # Outputs like instance IPs
‚îú‚îÄ‚îÄ variables.tf # (Optional) variables file
‚îú‚îÄ‚îÄ README.md # This file
```

## üß© My plan: 

1: Using terraform to provisiion the ec2 and vpc, All instances are deployed into a **public subnet** with **SSH (port 22)** access from my current IP.

2:Use the manager node to control other node by using ansible, it is gonna be ansible learning and practice


## How to config the ansible manager mode.

### 1. Install Dependencies

```
sudo yum install -y python3
pip3 install --user ansible
```
### 2. Check the anbiel version

'''
~/.local/bin/ansible --version
'''

2 : Copy the ec2 created key-pair from local machine to manager machine, so manager machine can access the worker node.

3: create folder/ ansible and edit file ansible.cfg

[defaults]
inventory= ./hosts
remote_user = ec2-user
private_key_file = ~/.ssh/id_rsa
host_key_checking = False

4: VIm hosts file and give the ip and detials

fun part: all ip in there are private ipv4 address which have been generated by AWS, 
because the manager machine is sitting the same subnet of other worker machine. the public ip will not be allow to do the sss authenitcation.

infras level: i provisioned two security group,one allow the ssh from my home iP address, another is to allow the ssh from the provisioned subnet by port 22

[database]
node5 ansible_host=10.0.1.57

[proxy]
node2 ansible_host=10.0.1.8
[test]
node1 ansible_host=10.0.1.94
[webserver]
node3 ansible_host=10.0.1.85
node4 ansible_host=10.0.1.53


